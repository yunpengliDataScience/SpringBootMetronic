<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	
	<!-- Select the block having id as 'mainContent' here in this page and pass it as a parameter to the fragement named 'pageTemplate'
		 defined in pageTemplate.html under fragments folder. The content should show up as the main content. 
		 Since all styles, navigation, and page layout have been defined in the pageTemplate fragment, we only need to 
		 focus on the main content construction. In addtion, page specific css links and scripts can be added. 
	-->
	<th:block th:replace="fragments/pageTemplate :: pageTemplate(title='Modal Page', pageId='modalPage', pageSpecificCSSLinks=~{}, pageSpecificScripts=~{::script}, content=~{:: #modalPage})">
		
		<th:block id="modalPage">
			<!--begion::row-->
			<div class="row">
				
				<!--begin::column-->
				<div class="col-md-12">
					
					<!--begin::portlet-->
					<div class="kt-portlet">
						
						<div class="kt-portlet__head">
							<div class="kt-portlet__head-label">
								<h3 class="kt-portlet__head-title">
									Modal Page
								</h3>
							</div>
						</div>
						
						<div class="kt-portlet__body">
							<button type="button" class="btn btn-bold btn-label-brand btn-sm" data-toggle="modal" data-target="#kt_modal_1"> Launch Modal 1</button>	
							
							<br>
							
							<!-- Display success message if present -->
						    <div th:if="${successMessage}" class="alert alert-solid-success alert-bold" role="alert">
						        <div th:text="${successMessage}" class="alert-text"></div>
						        <div class="alert-close">
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true"><i class="la la-close"></i></span>
									</button>
								</div>
						    </div>
						    <div th:if="${errorMessage}" class="alert alert-solid-danger alert-bold" role="alert">
						        <div th:text="${errorMessage}" class="alert-text"></div>
						        <div class="alert-close">
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true"><i class="la la-close"></i></span>
									</button>
								</div>
						    </div>
						    <div th:if="${warnMessage}" class="alert alert-solid-warning alert-bold" role="alert">
						        <div th:text="${warnMessage}" class="alert-text"></div>
						        <div class="alert-close">
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true"><i class="la la-close"></i></span>
									</button>
								</div>
						    </div>
							<button type="button" class="btn btn-bold btn-label-brand btn-sm" data-toggle="modal" data-target="#kt_modal_2"> Launch Modal 2 (File Upload)</button>
							
							<br/>
							<button type="button" class="btn btn-bold btn-label-brand btn-sm" data-toggle="modal" data-target="#kt_modal_3"> Launch Modal 3 (Data Transfer)</button>
							
							<br/>
							<!-- Display Data Here -->
						    <div id="displayData" class="mt-3">
						        <!-- Data from the modal will be displayed here -->
						    </div>
						    
						</div>
						<div class="kt-portlet__foot">
						</div>
						
					</div>
					<!--end::portlet-->
				</div>
				<!--end::column-->
				
			</div>
			<!--end::row-->
			
			<!--begin::Modal 1-->
			<div class="modal fade" id="kt_modal_1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							</button>
						</div>
						<div class="modal-body">
							<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
							
							<button type="button" class="btn btn-primary">Save changes</button>
						</div>
					</div>
				</div>
			</div>
			<!--end::Modal 1-->
			
			<!--begin::Modal 2-->
			<div class="modal fade" id="kt_modal_2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<!--begin::form-->
					<form class="kt-form" action="#" th:action="@{/forms/uploadFromModal}" method="post" enctype="multipart/form-data">

						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel">File Upload</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								</button>
							</div>
							<div class="modal-body">
	
								<div class="form-group file-input">
									<label for="file" class="btn btn-primary">Select a file to upload</label>
	                				<input type="file" class="input-file" name="file" id="file" onchange="updateFileName(this)"/>
	                				<span id="file-name">No file chosen</span>
								</div>
	
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
								<input type="submit" class="btn btn-primary" value="Upload"/>
							</div>
						</div>
					</form>
					<!--end::form-->
				</div>
			</div>
			<!--end::Modal 2-->
			
			<!--begin::Modal 3-->
			<div class="modal fade" id="kt_modal_3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<!--begin::form-->
					<form class="kt-form" action="#" th:action="@{/}" method="post">

						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel">Data Transfer</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								</button>
							</div>
							<div class="modal-body">
	
								<!-- Input Field in Modal -->
                    			<input type="text" id="modalInput" class="form-control" placeholder="Enter some text">
	
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    			<button type="button" class="btn btn-primary" id="saveButton">Save changes</button>
							</div>
						</div>
					</form>
					<!--end::form-->
				</div>
			</div>
			<!--end::Modal 3-->
			
		</th:block>
		
		<script>
			function updateFileName(input) {
			    var fileName = input.files[0].name;
			    var fileNameDisplay = document.getElementById('file-name');
			    fileNameDisplay.textContent = fileName;
			}
			
			$(document).ready(function() {
            // Event listener for save button click
	            $('#saveButton').click(function() {
	                // Get the value from the input field in the modal
	                const modalInputValue = $('#modalInput').val();
	
	                // Pass the data to the main page (display it in a div)
	                $('#displayData').text(`Data from modal: ${modalInputValue}`);
	
	                // Close the modal
	                $('#kt_modal_3').modal('hide');
	            });
	        });
		</script>
	</th:block>
</html>